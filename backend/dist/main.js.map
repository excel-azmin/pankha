{"version":3,"sources":["../src/main.ts"],"sourcesContent":["import { clerkMiddleware } from '@clerk/express';\nimport { NestFactory } from '@nestjs/core';\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\nimport { ResponseInterceptor } from './common/shared/interceptors/response.interceptors';\n\ndeclare const module: any;\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n  app.use(clerkMiddleware());\n  app.setGlobalPrefix('api');\n  const config = new DocumentBuilder()\n    .setTitle('Backbone API Gateway')\n    .setDescription(\n      'A comprehensive API Gateway for the Nestjs backend with microservices architecture',\n    )\n    .setVersion('1.0')\n    .addTag('API Gateway')\n    .addBearerAuth({\n      type: 'http',\n      scheme: 'bearer',\n      bearerFormat: 'JWT',\n      description:\n        'Enter JWT token in this format - Bearer YOUR_TOKEN to access protected routes only.',\n    })\n    .build();\n  const document = SwaggerModule.createDocument(app, config, {\n    ignoreGlobalPrefix: false,\n  });\n  SwaggerModule.setup('api-docs', app, document);\n\n  app.enableCors({\n    origin: '*',\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n    allowedHeaders: 'Content-Type, Accept',\n  });\n  // global interceptors\n  app.useGlobalInterceptors(new ResponseInterceptor());\n\n  await app.startAllMicroservices();\n  await app.listen(3001);\n\n  if (module.hot) {\n    module.hot.accept();\n    module.hot.dispose(() => app.close());\n  }\n}\nbootstrap();\n"],"names":["bootstrap","app","NestFactory","create","AppModule","use","clerkMiddleware","setGlobalPrefix","config","DocumentBuilder","setTitle","setDescription","setVersion","addTag","addBearerAuth","type","scheme","bearerFormat","description","build","document","SwaggerModule","createDocument","ignoreGlobalPrefix","setup","enableCors","origin","methods","allowedHeaders","useGlobalInterceptors","ResponseInterceptor","startAllMicroservices","listen","module","hot","accept","dispose","close"],"mappings":";;;;yBAAgC;sBACJ;yBACmB;2BACrB;sCACU;AAIpC,eAAeA;IACb,MAAMC,MAAM,MAAMC,iBAAW,CAACC,MAAM,CAACC,oBAAS;IAC9CH,IAAII,GAAG,CAACC,IAAAA,wBAAe;IACvBL,IAAIM,eAAe,CAAC;IACpB,MAAMC,SAAS,IAAIC,wBAAe,GAC/BC,QAAQ,CAAC,wBACTC,cAAc,CACb,sFAEDC,UAAU,CAAC,OACXC,MAAM,CAAC,eACPC,aAAa,CAAC;QACbC,MAAM;QACNC,QAAQ;QACRC,cAAc;QACdC,aACE;IACJ,GACCC,KAAK;IACR,MAAMC,WAAWC,sBAAa,CAACC,cAAc,CAACrB,KAAKO,QAAQ;QACzDe,oBAAoB;IACtB;IACAF,sBAAa,CAACG,KAAK,CAAC,YAAYvB,KAAKmB;IAErCnB,IAAIwB,UAAU,CAAC;QACbC,QAAQ;QACRC,SAAS;QACTC,gBAAgB;IAClB;IACA,sBAAsB;IACtB3B,IAAI4B,qBAAqB,CAAC,IAAIC,yCAAmB;IAEjD,MAAM7B,IAAI8B,qBAAqB;IAC/B,MAAM9B,IAAI+B,MAAM,CAAC;IAEjB,IAAIC,OAAOC,GAAG,EAAE;QACdD,OAAOC,GAAG,CAACC,MAAM;QACjBF,OAAOC,GAAG,CAACE,OAAO,CAAC,IAAMnC,IAAIoC,KAAK;IACpC;AACF;AACArC"}